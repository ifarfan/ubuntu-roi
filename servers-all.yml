---
#
#  Start up
#
- hosts: all
  become: true
  pre_tasks:
    - name: Install python 2, if not present
      raw: bash -c "test -e /usr/bin/python || (apt -qqy update && apt install -qqy python-minimal)"
      register: output
      changed_when: output.stdout not in ["", "\r\n"]
      # - output.stdout != ""
      # - output.stdout != "\r\n"

- hosts: gunbot
  gather_facts: true
  become: true
  roles:
  - role: base/init
  - role: development/vim
  - role: development/nodejs

- hosts: gecko
  gather_facts: true
  become: true
  roles:
  - role: base/init
  - role: miscellaneous/gecko

- hosts: testboxes
  gather_facts: true
  become: true
  roles:
  # - role: base/init
  # - role: development/nodejs
  # - role: development/vim
  # - role: development/ruby
  # - role: database/memcached
  - role: database/redis
